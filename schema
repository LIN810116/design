This is a high-level schema description representing logical data and
relationships.  These will not (necessarily) map to individual tables.

Formatting suggestions welcome.  I'm just making things up for now and trying
to be consistent with syntax, but hopefully it's at least understandable.

See overview.md for descriptions.

Legend:
	Types (mostly postgres-like):
		id:		unique identifier primary key, most likely integer (implicit on all tables)
		long-text:	multi-line text, unlimited, possibly with some markup formatting?
		set:		shorthand for one-to-many table including current table's primary key and some unique constraints
	Keywords:
		user:		comes from the user by explicit prompting
		optional:	not required to be specified to allow submission
		public:		no restrictions except those inherited from containing objects
		internal:	never exposed to users
	'|':	subject to the following constraints
	':':	inherits from
	'--':	comment follows

entity table
	name text public
	address text user -- should perhaps be broken down

trust table
	child entity unique(parent,child)
	parent entity
	access enum -- child level of access to site (inherited)
		NONE
		BROWSE -- browsing only, no creation/editing (affiliate)
		FULL -- full site access including creation
		GRANT -- can grant full site access
	delegation enum -- child level of access to parent (not inherited)
		NONE
		VIEW
		EDIT
		ADMIN
	authorized timestamp
	expiry timestamp

trust_request table internal
	requested timestamp
	child entity
	parent entity

account table
	entity id unique
	creation timestamp
	username text unique
	email text
	timezone timezone -- for display

account_request table internal
	creation timestamp
	username text user
	email text user
	token text -- long random string

study table
	creation timestamp
	title text user public
	description long-text user optional public
	users set public
		user entity unique
		type enum
			VIEW
			DATA
			EDIT
			OWN
		inherited boolean | type != OWN OR NOT inherited -- applies to all descendents
		effective timestamp -- effective as of this date (possibly future?)
		-- e.g, (ROOT, DATA, TRUE) means typical "shared"
	inclusion set public
		study study
		-- ...

acquisition table
	creation timestamp internal
	study study
	index text optional user -- subject id or something
	acquisition date public user
	participant set
		id text optional user
		gender enum optional
		birthdate date-range optional -- range for approximate ages
		-- consent here? (actually but not logically)
		-- other demographic info?
	session set -- if (timeseries) data were collected discontinuously

object table -- file blobs in storage
	creation timestamp internal
	creator account
	content-type text/enum -- mimetype? PDF, video format, datavyu, etc.
	name text user public -- filename perhaps?
	description long-text user optional public
	date date user optional public
	supersedes object user optional
	consent enum -- these are intersected with study.users permissions
		PRIVATE -- never honor VIEWERS
		DATABRARY -- at most authorized users
		EXCERPTS -- additionally make excerpt objects (TBD) public
		DEIDENTIFIED -- contains participant data but no personal identifiers
		PUBLIC -- no participant data 

timeseries table : object
	resolution float -- Hz
	length interval
	offset interval optional -- starting point within acquisition session, for synchronization

material table
	object object
	study study

data table
	object object
	acquisiton acquisition
	session optional
	primary boolean -- original acquisition source

article table -- : object if PDF
	author set
		author entity
	doi text optional
	title text -- or object.name
	abstract long-text -- or object.description

study_article table
	study study
	article article

tag table public -- the set of possible tags
	name text unique -- [a-z-]+

tag_description table public
	creation timestamp
	tag tag -- unique for replaced is null
	description text user
	replaces tag_description optional

tag_item table
	creation timestamp
	tag tag
	user account

tag_study table : tag_item
	study study

tag_acquisition table : tag_item
	acquisition acquisition

tag_object table : tag_item
	object object

-- modification, revision control features?
