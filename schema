This is a high-level schema description representing logical data and
relationships.  These will not (necessarily) map to individual tables.

Formatting suggestions welcome.  I'm just making things up for now and trying
to be consistent with syntax, but hopefully it's at least understandable.

See overview.md for descriptions.

Legend:
	Types (mostly postgres-like):
		id:		unique identifier primary key, most likely integer (implicit on all tables)
		long-text:	multi-line text, unlimited, possibly with some markup formatting?
		set:		shorthand for one-to-many table including current table's primary key and some unique constraints
	Keywords:
		user:		comes from the user by explicit prompting
		optional:	not required to be specified to allow submission
		public:		no restrictions except those inherited from containing objects
		internal:	never exposed to users
	'|':	subject to the following constraints
	':':	inherits from
	'--':	comment follows

entity table
	name text public
	level enum public
		ROOT/ADMIN
		INSTITUTION
		ADMINISTRATOR
		CONTRIBUTOR -- only faculty can be contributors?
		FACULTY -- may be the same as contributor
		MEMBER -- students, staff, peons
		UNKNOWN/NULL -- not yet authorized (implies no parents)
	address text user -- should perhaps be broken down

trust table
	parent entity
	child entity unique(parent,child) | parent.level < child.level
	inheritance enum
		NONE
		READ -- default
		ADMIN
	authorized timestamp

account table
	entity id unique
	creation timestamp
	username text
	email text
	timezone timezone -- for display

account_request table internal
	creation timestamp
	username text user
	email text user
	token text -- long random string

authorize_request table internal
	creation timestamp
	user entity
	parent entity

study table
	creation timestamp
	title text user public
	description long-text user optional public
	users set public
		user entity unique
		type enum
			OWNER
			MANAGER
			VIEWER
		inherited boolean | type != OWNER OR NOT inherited -- applies to all descendents
		effective timestamp -- effective as of this date (possibly future?)
		-- e.g, (ROOT, VIEWER, TRUE) means "shared"
	inclusion set public
		study study
		-- ...

acquisition table
	creation timestamp internal
	study study
	index text optional user -- subject id or something
	acquisition date public user
	consent enum -- these are intersected with study.users permissions
		NONE -- never honor VIEWERS
		DATABRARY -- at most authorized users
		EXCERPTS -- additionally make excerpt objects (TBD) public
	participant set
		id text optional user
		gender enum optional
		birthdate date-range optional -- range for approximate ages
		-- consent here? (actually but not logically)
		-- other demographic info?
	session set -- if (timeseries) data were collected discontinuously

object table -- file blobs in storage
	creation timestamp internal
	creator account
	content-type text/enum -- mimetype? PDF, video format, datavyu, etc.
	name text user public -- filename perhaps?
	description long-text user optional public
	date date user optional public
	supersedes object user

material table : object
	study study

data table : object
	acquisiton acquisition
	session optional

timeseries table : data
	resolution float -- Hz
	length interval
	offset interval optional -- starting point within acquisition session, for synchronization

article table -- : object if PDF
	author set
		author entity
	doi text optional
	title text -- or object.name
	abstract long-text -- or object.description

study_article table
	study study
	article article

tag table public -- the set of possible tags
	name text unique -- [a-z -]+

tag_description table public
	creation timestamp
	tag tag -- unique for replaced is null
	description text user
	replaces tag_description optional

tag_item table
	creation timestamp
	tag tag
	user account

tag_study table : tag_item
	study study

tag_acquisition table : tag_item
	acquisition acquisition

tag_object table : tag_item
	object object

audit table -- log of all modification activity
	when timestamp
	user account
	target oid
	-- ...?

-- modification, revision control features?
